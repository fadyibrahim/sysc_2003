WARNING: EXTCODE CODE AREA DO NOT CONTAIN RELOCATED ADDRESSES.
THIS WILL BE REMEDIED IN A LATER RELEASE.
                        .module Assign41.C
                        .area text
--- 0000                   .dbfile Assign41.C
--- 0000                   .dbfunc e main _main fV
 402A            _main::
 402A                    .dbline -1
 402A                    .dbline 9
 402A            ; /*
 402A            ; Authors Fady Ibrahim 100876906, Gavez Smith 100857991 
 402A            ; */
 402A            ; #include "hcs12dp256.h"
 402A            ; 
 402A            ; 
 402A            ; void printKeysPressed();
 402A            ; 
 402A            ; void main(){
 402A                    .dbline 12
 402A            ; 
 402A            ;        
 402A            ;        printKeysPressed();
 402A  16402E            jsr _printKeysPressed
 402D                    .dbline -2
 402D                    .dbline 15
 402D            ; 
 402D            ;       
 402D            ; }
 402D            L3:
 402D                    .dbline 0 ; func end
 402D  3D                rts
 402E                    .dbend
 402E                    .dbfunc e printKeysPressed _printKeysPressed fV
 402E            ;           loop -> -7,x
 402E            ;     keypressed -> -5,x
 402E            ;        counter -> -4,x
 402E            ;              i -> -2,x
 402E            _printKeysPressed::
 402E  34                pshx
 402F  B775              tfr s,x
 4031  1B98              leas -8,sp
 4033                    .dbline -1
 4033                    .dbline 21
 4033            ; 
 4033            ; /*
 4033            ; printKeysPressed gets the character pressed on the keyboard by pulling and then it prints out the value on the terminal.
 4033            ; 
 4033            ; */
 4033            ; void printKeysPressed(){
 4033                    .dbline 22
 4033            ;       int i=0;
 4033  CC0000            ldd #0
 4036  6C1E              std -2,x
 4038                    .dbline 23
 4038            ;       int loop=0;
 4038  CC0000            ldd #0
 403B  6C19              std -7,x
 403D                    .dbline 24
 403D            ;       char keypressed=0;
 403D  691B              clr -5,x
 403F                    .dbline 25
 403F            ;       int counter=1;
 403F  CC0001            ldd #1
 4042  6C1C              std -4,x
 4044                    .dbline 26
 4044            ;       SPI1CR1=0x00;
 4044  7900F0            clr 0xf0
 4047                    .dbline 28
 4047            ; //enable the rows with 1. Also expect an output for PTP
 4047            ;       DDRP=0x0F;
 4047  C60F              ldab #15
 4049  7B025A            stab 0x25a
 404C                    .dbline 30
 404C            ; //enable the colums with 0. Also expect an input for PTH
 404C            ;       DDRH=0x00;
 404C  790262            clr 0x262
 404F  182001C3          lbra L6
 4053            L5:
 4053                    .dbline 32
 4053            ;       while (loop==0)
 4053            ;       {
 4053                    .dbline 34
 4053            ; // enable the latch.
 4053            ;       PTM = 0x08;                                                             
 4053  C608              ldab #8
 4055  7B0250            stab 0x250
 4058                    .dbline 35
 4058            ;       PTP=counter;
 4058  EC1C              ldd -4,x
 405A  7B0258            stab 0x258
 405D                    .dbline 37
 405D            ; //get the input value from PTH
 405D            ;       keypressed=PTH;
 405D                    ; vol
 405D  F60260            ldab 0x260
 4060  6B1B              stab -5,x
 4062                    .dbline 38
 4062            ;       PTM &= 0x00;
 4062  CC0000            ldd #0
 4065  7B0250            stab 0x250
 4068                    .dbline 39
 4068            ;       keypressed &= 0xF0;
 4068  0D1B0F            bclr -5,x,#0xf
 406B                    .dbline 40
 406B            ;       if (keypressed==0x10 && counter==1)
 406B  E61B              ldab -5,x
 406D  C110              cmpb #16
 406F  2611              bne L8
 4071  EC1C              ldd -4,x
 4073  8C0001            cpd #1
 4076  260A              bne L8
 4078                    .dbline 41
 4078            ;       {
 4078                    .dbline 42
 4078            ;          printf("1" );
 4078  CC423E            ldd #L10
 407B  164690            jsr _printf
 407E                    .dbline 43
 407E            ;       }
 407E  18200150          lbra L9
 4082            L8:
 4082                    .dbline 44
 4082            ;       else if (keypressed==0x20 && counter==1)
 4082  E61B              ldab -5,x
 4084  C120              cmpb #32
 4086  2611              bne L11
 4088  EC1C              ldd -4,x
 408A  8C0001            cpd #1
 408D  260A              bne L11
 408F                    .dbline 45
 408F            ;       {
 408F                    .dbline 46
 408F            ;          printf("2" );
 408F  CC423C            ldd #L13
 4092  164690            jsr _printf
 4095                    .dbline 47
 4095            ;       }
 4095  18200139          lbra L12
 4099            L11:
 4099                    .dbline 48
 4099            ;       else if (keypressed==0x40 && counter==1)
 4099  E61B              ldab -5,x
 409B  C140              cmpb #64
 409D  2611              bne L14
 409F  EC1C              ldd -4,x
 40A1  8C0001            cpd #1
 40A4  260A              bne L14
 40A6                    .dbline 49
 40A6            ;       {
 40A6                    .dbline 50
 40A6            ;          printf("3" );
 40A6  CC423A            ldd #L16
 40A9  164690            jsr _printf
 40AC                    .dbline 51
 40AC            ;       }
 40AC  18200122          lbra L15
 40B0            L14:
 40B0                    .dbline 52
 40B0            ;       else if (keypressed==0x80 && counter==1)
 40B0  E61B              ldab -5,x
 40B2  C180              cmpb #128
 40B4  2611              bne L17
 40B6  EC1C              ldd -4,x
 40B8  8C0001            cpd #1
 40BB  260A              bne L17
 40BD                    .dbline 53
 40BD            ;       {
 40BD                    .dbline 54
 40BD            ;          printf("A");
 40BD  CC4238            ldd #L19
 40C0  164690            jsr _printf
 40C3                    .dbline 55
 40C3            ;       }
 40C3  1820010B          lbra L18
 40C7            L17:
 40C7                    .dbline 56
 40C7            ;       else if (keypressed==0x10 && counter==2)
 40C7  E61B              ldab -5,x
 40C9  C110              cmpb #16
 40CB  2611              bne L20
 40CD  EC1C              ldd -4,x
 40CF  8C0002            cpd #2
 40D2  260A              bne L20
 40D4                    .dbline 57
 40D4            ;       {
 40D4                    .dbline 58
 40D4            ;          printf("4");
 40D4  CC4236            ldd #L22
 40D7  164690            jsr _printf
 40DA                    .dbline 59
 40DA            ;       }
 40DA  182000F4          lbra L21
 40DE            L20:
 40DE                    .dbline 60
 40DE            ;               else if (keypressed==0x20 && counter==2)
 40DE  E61B              ldab -5,x
 40E0  C120              cmpb #32
 40E2  2611              bne L23
 40E4  EC1C              ldd -4,x
 40E6  8C0002            cpd #2
 40E9  260A              bne L23
 40EB                    .dbline 61
 40EB            ;       {
 40EB                    .dbline 62
 40EB            ;          printf("5");
 40EB  CC4234            ldd #L25
 40EE  164690            jsr _printf
 40F1                    .dbline 63
 40F1            ;       }
 40F1  182000DD          lbra L24
 40F5            L23:
 40F5                    .dbline 64
 40F5            ;               else if (keypressed==0x40 && counter==2)
 40F5  E61B              ldab -5,x
 40F7  C140              cmpb #64
 40F9  2611              bne L26
 40FB  EC1C              ldd -4,x
 40FD  8C0002            cpd #2
 4100  260A              bne L26
 4102                    .dbline 65
 4102            ;       {
 4102                    .dbline 66
 4102            ;          printf("6");
 4102  CC4232            ldd #L28
 4105  164690            jsr _printf
 4108                    .dbline 67
 4108            ;       }
 4108  182000C6          lbra L27
 410C            L26:
 410C                    .dbline 68
 410C            ;               else if (keypressed==0x80 && counter==2)
 410C  E61B              ldab -5,x
 410E  C180              cmpb #128
 4110  2611              bne L29
 4112  EC1C              ldd -4,x
 4114  8C0002            cpd #2
 4117  260A              bne L29
 4119                    .dbline 69
 4119            ;       {
 4119                    .dbline 70
 4119            ;          printf("B");
 4119  CC4230            ldd #L31
 411C  164690            jsr _printf
 411F                    .dbline 71
 411F            ;       }
 411F  182000AF          lbra L30
 4123            L29:
 4123                    .dbline 73
 4123            ;       
 4123            ;               else if (keypressed==0x10 && counter==4)
 4123  E61B              ldab -5,x
 4125  C110              cmpb #16
 4127  2611              bne L32
 4129  EC1C              ldd -4,x
 412B  8C0004            cpd #4
 412E  260A              bne L32
 4130                    .dbline 74
 4130            ;       {
 4130                    .dbline 75
 4130            ;          printf("7");
 4130  CC422E            ldd #L34
 4133  164690            jsr _printf
 4136                    .dbline 76
 4136            ;       }
 4136  18200098          lbra L33
 413A            L32:
 413A                    .dbline 77
 413A            ;               else if (keypressed==0x20 && counter==4)
 413A  E61B              ldab -5,x
 413C  C120              cmpb #32
 413E  2611              bne L35
 4140  EC1C              ldd -4,x
 4142  8C0004            cpd #4
 4145  260A              bne L35
 4147                    .dbline 78
 4147            ;       {
 4147                    .dbline 79
 4147            ;          printf("8");
 4147  CC422C            ldd #L37
 414A  164690            jsr _printf
 414D                    .dbline 80
 414D            ;       }
 414D  18200081          lbra L36
 4151            L35:
 4151                    .dbline 81
 4151            ;               else if (keypressed==0x40 && counter==4)
 4151  E61B              ldab -5,x
 4153  C140              cmpb #64
 4155  260F              bne L38
 4157  EC1C              ldd -4,x
 4159  8C0004            cpd #4
 415C  2608              bne L38
 415E                    .dbline 82
 415E            ;       {
 415E                    .dbline 83
 415E            ;          printf("9");
 415E  CC422A            ldd #L40
 4161  164690            jsr _printf
 4164                    .dbline 84
 4164            ;       }
 4164  206C              bra L39
 4166            L38:
 4166                    .dbline 85
 4166            ;               else if (keypressed==0x80 && counter==4)
 4166  E61B              ldab -5,x
 4168  C180              cmpb #128
 416A  260F              bne L41
 416C  EC1C              ldd -4,x
 416E  8C0004            cpd #4
 4171  2608              bne L41
 4173                    .dbline 86
 4173            ;       {
 4173                    .dbline 87
 4173            ;          printf("C");
 4173  CC4228            ldd #L43
 4176  164690            jsr _printf
 4179                    .dbline 88
 4179            ;       }
 4179  2057              bra L42
 417B            L41:
 417B                    .dbline 90
 417B            ;       
 417B            ;               else if (keypressed==0x10 && counter==8)
 417B  E61B              ldab -5,x
 417D  C110              cmpb #16
 417F  260F              bne L44
 4181  EC1C              ldd -4,x
 4183  8C0008            cpd #8
 4186  2608              bne L44
 4188                    .dbline 91
 4188            ;       {
 4188                    .dbline 92
 4188            ;          printf("E");
 4188  CC4226            ldd #L46
 418B  164690            jsr _printf
 418E                    .dbline 93
 418E            ;       }
 418E  2042              bra L45
 4190            L44:
 4190                    .dbline 94
 4190            ;               else if (keypressed==0x20 && counter==8)
 4190  E61B              ldab -5,x
 4192  C120              cmpb #32
 4194  2614              bne L47
 4196  EC1C              ldd -4,x
 4198  8C0008            cpd #8
 419B  260D              bne L47
 419D                    .dbline 95
 419D            ;       {
 419D                    .dbline 96
 419D            ;          printf("0");
 419D  CC4224            ldd #L49
 41A0  164690            jsr _printf
 41A3                    .dbline 97
 41A3            ;          loop=1;
 41A3  CC0001            ldd #1
 41A6  6C19              std -7,x
 41A8                    .dbline 98
 41A8            ;       }
 41A8  2028              bra L48
 41AA            L47:
 41AA                    .dbline 99
 41AA            ;               else if (keypressed==0x40 && counter==8)
 41AA  E61B              ldab -5,x
 41AC  C140              cmpb #64
 41AE  260F              bne L50
 41B0  EC1C              ldd -4,x
 41B2  8C0008            cpd #8
 41B5  2608              bne L50
 41B7                    .dbline 100
 41B7            ;       {
 41B7                    .dbline 101
 41B7            ;          printf("F");
 41B7  CC4222            ldd #L52
 41BA  164690            jsr _printf
 41BD                    .dbline 102
 41BD            ;       }
 41BD  2013              bra L51
 41BF            L50:
 41BF                    .dbline 103
 41BF            ;               else if (keypressed==0x80 && counter==8)
 41BF  E61B              ldab -5,x
 41C1  C180              cmpb #128
 41C3  260D              bne L53
 41C5  EC1C              ldd -4,x
 41C7  8C0008            cpd #8
 41CA  2606              bne L53
 41CC                    .dbline 104
 41CC            ;       {
 41CC                    .dbline 105
 41CC            ;          printf("D");
 41CC  CC4220            ldd #L55
 41CF  164690            jsr _printf
 41D2                    .dbline 106
 41D2            ;       }
 41D2            L53:
 41D2            L51:
 41D2            L48:
 41D2            L45:
 41D2            L42:
 41D2            L39:
 41D2            L36:
 41D2            L33:
 41D2            L30:
 41D2            L27:
 41D2            L24:
 41D2            L21:
 41D2            L18:
 41D2            L15:
 41D2            L12:
 41D2            L9:
 41D2                    .dbline 108
 41D2  CC0000            ldd #0
 41D5  6C1E              std -2,x
 41D7            L56:
 41D7                    .dbline 108
 41D7            L57:
 41D7                    .dbline 108
 41D7            ;       //delay so that 1 character can get displayed at a time
 41D7            ;       for ( i=0;i<10000;i++);
 41D7  EC1E              ldd -2,x
 41D9  C30001            addd #1
 41DC  6C1E              std -2,x
 41DE                    .dbline 108
 41DE  EC1E              ldd -2,x
 41E0  8C2710            cpd #10000
 41E3  2DF2              blt L56
 41E5                    .dbline 111
 41E5            ; 
 41E5            ;       //increament the counter and make sure it stays on 1,2,4,8 to set rows 1,2,3,4
 41E5            ;       if(counter>=2)
 41E5  EC1C              ldd -4,x
 41E7  8C0002            cpd #2
 41EA  2D09              blt L60
 41EC                    .dbline 112
 41EC            ;       {
 41EC                    .dbline 113
 41EC            ;       counter=counter +2;
 41EC  EC1C              ldd -4,x
 41EE  C30002            addd #2
 41F1  6C1C              std -4,x
 41F3                    .dbline 114
 41F3            ;       }
 41F3  2007              bra L61
 41F5            L60:
 41F5                    .dbline 116
 41F5            ;       else
 41F5            ;       {
 41F5                    .dbline 117
 41F5            ;       counter++;
 41F5  EC1C              ldd -4,x
 41F7  C30001            addd #1
 41FA  6C1C              std -4,x
 41FC                    .dbline 118
 41FC            ;       }
 41FC            L61:
 41FC                    .dbline 119
 41FC            ;       if (counter==6)
 41FC  EC1C              ldd -4,x
 41FE  8C0006            cpd #6
 4201  2607              bne L62
 4203                    .dbline 120
 4203            ;       {
 4203                    .dbline 121
 4203            ;       counter=counter+2;
 4203  EC1C              ldd -4,x
 4205  C30002            addd #2
 4208  6C1C              std -4,x
 420A                    .dbline 122
 420A            ;       }
 420A            L62:
 420A                    .dbline 123
 420A            ;       if (counter>8)
 420A  EC1C              ldd -4,x
 420C  8C0008            cpd #8
 420F  2F05              ble L64
 4211                    .dbline 124
 4211            ;       {
 4211                    .dbline 125
 4211            ;       counter=1;
 4211  CC0001            ldd #1
 4214  6C1C              std -4,x
 4216                    .dbline 126
 4216            ;       }
 4216            L64:
 4216                    .dbline 127
 4216            L6:
 4216                    .dbline 31
 4216  EC19              ldd -7,x
 4218  1827FE37          lbeq L5
 421C                    .dbline -2
 421C                    .dbline 128
 421C            ;       }
 421C            ; }
 421C            L4:
 421C  B757              tfr x,s
 421E  30                pulx
 421F                    .dbline 0 ; func end
 421F  3D                rts
 4220                    .dbsym l loop -7 I
 4220                    .dbsym l keypressed -5 c
 4220                    .dbsym l counter -4 I
 4220                    .dbsym l i -2 I
 4220                    .dbend
 4220            L55:
 4220  4400              .byte 'D,0
 4222            L52:
 4222  4600              .byte 'F,0
 4224            L49:
 4224  3000              .byte 48,0
 4226            L46:
 4226  4500              .byte 'E,0
 4228            L43:
 4228  4300              .byte 'C,0
 422A            L40:
 422A  3900              .byte 57,0
 422C            L37:
 422C  3800              .byte 56,0
 422E            L34:
 422E  3700              .byte 55,0
 4230            L31:
 4230  4200              .byte 'B,0
 4232            L28:
 4232  3600              .byte 54,0
 4234            L25:
 4234  3500              .byte 53,0
 4236            L22:
 4236  3400              .byte 52,0
 4238            L19:
 4238  4100              .byte 'A,0
 423A            L16:
 423A  3300              .byte 51,0
 423C            L13:
 423C  3200              .byte 50,0
 423E            L10:
 423E  3100              .byte 49,0
